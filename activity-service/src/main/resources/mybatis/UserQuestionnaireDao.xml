<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.power.dao.UserQuestionnaireDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.power.entity.UserQuestionnaireEntity" id="userQuestionnaireMap">
        <result property="id" column="id"/>
        <result property="userId" column="user_id"/>
        <result property="phone" column="phone"/>
        <result property="createDt" column="create_dt"/>
        <result property="sex" column="sex"/>
        <result property="age" column="age"/>
        <result property="havaUse" column="hava_use"/>
        <result property="cannotUse" column="cannot_use"/>
        <result property="usePower" column="use_power"/>
        <result property="useFrequency" column="use_frequency"/>
        <result property="findPower" column="find_power"/>
        <result property="userLocal" column="user_local"/>
        <result property="fault" column="fault"/>
        <result property="borrowModel" column="borrow_model"/>
        <result property="suggest" column="suggest"/>
    </resultMap>

	<select id="queryObject" resultType="com.power.entity.UserQuestionnaireEntity">
		select * from user_questionnaire where id = #{value}
	</select>

	<select id="queryList" resultType="com.power.entity.UserQuestionnaireEntity">
		select * from user_questionnaire
        <where>
			                <!--  -->
                <if test="id != null and id.trim() != ''">
                    AND id = #{id}
                </if>
			                <!-- userId -->
                <if test="userId != null and userId.trim() != ''">
                    AND user_id = #{userId}
                </if>
			                <!-- 电话号码 -->
                <if test="phone != null and phone.trim() != ''">
                    AND phone = #{phone}
                </if>
			                <!-- 填表时间 -->
                <if test="createDt != null and createDt.trim() != ''">
                    AND create_dt = #{createDt}
                </if>
			                <!-- 性别 -->
                <if test="sex != null and sex.trim() != ''">
                    AND sex = #{sex}
                </if>
			                <!-- 年龄 -->
                <if test="age != null and age.trim() != ''">
                    AND age = #{age}
                </if>
			                <!-- 是否用过充电宝 -->
                <if test="havaUse != null and havaUse.trim() != ''">
                    AND hava_use = #{havaUse}
                </if>
			                <!-- 不使用的原因 -->
                <if test="cannotUse != null and cannotUse.trim() != ''">
                    AND cannot_use = #{cannotUse}
                </if>
			                <!-- 经常使用哪种充电宝 -->
                <if test="usePower != null and usePower.trim() != ''">
                    AND use_power = #{usePower}
                </if>
			                <!-- 使用频率 -->
                <if test="useFrequency != null and useFrequency.trim() != ''">
                    AND use_frequency = #{useFrequency}
                </if>
			                <!-- 在需要时能否找到身边的充电吧 -->
                <if test="findPower != null and findPower.trim() != ''">
                    AND find_power = #{findPower}
                </if>
			                <!-- 使用的场所 -->
                <if test="userLocal != null and userLocal.trim() != ''">
                    AND user_local = #{userLocal}
                </if>
			                <!-- 故障的概率 -->
                <if test="fault != null and fault.trim() != ''">
                    AND fault = #{fault}
                </if>
			                <!-- 租借的方式 -->
                <if test="borrowModel != null and borrowModel.trim() != ''">
                    AND borrow_model = #{borrowModel}
                </if>
			                <!-- 建议 -->
                <if test="suggest != null and suggest.trim() != ''">
                    AND suggest = #{suggest}
                </if>
			        </where>
        <choose>
            <when test="sidx != null and sidx.trim() != ''">
                order by ${sidx} ${order}
            </when>
			<otherwise>
                order by id desc
			</otherwise>
        </choose>
		<if test="offset != null and limit != null">
			limit #{offset}, #{limit}
		</if>
	</select>
	
 	<select id="queryTotal" resultType="int">
		select count(*) from user_questionnaire
		<where>
			                <!--  -->
                <if test="id != null and id.trim() != ''">
                    AND id = #{id}
                </if>
			                <!-- userId -->
                <if test="userId != null and userId.trim() != ''">
                    AND user_id = #{userId}
                </if>
			                <!-- 电话号码 -->
                <if test="phone != null and phone.trim() != ''">
                    AND phone = #{phone}
                </if>
			                <!-- 填表时间 -->
                <if test="createDt != null and createDt.trim() != ''">
                    AND create_dt = #{createDt}
                </if>
			                <!-- 性别 -->
                <if test="sex != null and sex.trim() != ''">
                    AND sex = #{sex}
                </if>
			                <!-- 年龄 -->
                <if test="age != null and age.trim() != ''">
                    AND age = #{age}
                </if>
			                <!-- 是否用过充电宝 -->
                <if test="havaUse != null and havaUse.trim() != ''">
                    AND hava_use = #{havaUse}
                </if>
			                <!-- 不使用的原因 -->
                <if test="cannotUse != null and cannotUse.trim() != ''">
                    AND cannot_use = #{cannotUse}
                </if>
			                <!-- 经常使用哪种充电宝 -->
                <if test="usePower != null and usePower.trim() != ''">
                    AND use_power = #{usePower}
                </if>
			                <!-- 使用频率 -->
                <if test="useFrequency != null and useFrequency.trim() != ''">
                    AND use_frequency = #{useFrequency}
                </if>
			                <!-- 在需要时能否找到身边的充电吧 -->
                <if test="findPower != null and findPower.trim() != ''">
                    AND find_power = #{findPower}
                </if>
			                <!-- 使用的场所 -->
                <if test="userLocal != null and userLocal.trim() != ''">
                    AND user_local = #{userLocal}
                </if>
			                <!-- 故障的概率 -->
                <if test="fault != null and fault.trim() != ''">
                    AND fault = #{fault}
                </if>
			                <!-- 租借的方式 -->
                <if test="borrowModel != null and borrowModel.trim() != ''">
                    AND borrow_model = #{borrowModel}
                </if>
			                <!-- 建议 -->
                <if test="suggest != null and suggest.trim() != ''">
                    AND suggest = #{suggest}
                </if>
			        </where> 
	</select>
	 
	<insert id="save" parameterType="com.power.entity.UserQuestionnaireEntity">
		insert into user_questionnaire
		(
			`id`, 
			`user_id`, 
			`phone`, 
			`create_dt`, 
			`sex`, 
			`age`, 
			`hava_use`, 
			`cannot_use`, 
			`use_power`, 
			`use_frequency`, 
			`find_power`, 
			`user_local`, 
			`fault`, 
			`borrow_model`, 
			`suggest`
		)
		values
		(
			#{id}, 
			#{userId}, 
			#{phone}, 
			#{createDt}, 
			#{sex}, 
			#{age}, 
			#{havaUse}, 
			#{cannotUse}, 
			#{usePower}, 
			#{useFrequency}, 
			#{findPower}, 
			#{userLocal}, 
			#{fault}, 
			#{borrowModel}, 
			#{suggest}
		)
	</insert>
	 
	<update id="update" parameterType="com.power.entity.UserQuestionnaireEntity">
		update user_questionnaire 
		<set>
			<if test="userId != null">`user_id` = #{userId}, </if>
			<if test="phone != null">`phone` = #{phone}, </if>
			<if test="createDt != null">`create_dt` = #{createDt}, </if>
			<if test="sex != null">`sex` = #{sex}, </if>
			<if test="age != null">`age` = #{age}, </if>
			<if test="havaUse != null">`hava_use` = #{havaUse}, </if>
			<if test="cannotUse != null">`cannot_use` = #{cannotUse}, </if>
			<if test="usePower != null">`use_power` = #{usePower}, </if>
			<if test="useFrequency != null">`use_frequency` = #{useFrequency}, </if>
			<if test="findPower != null">`find_power` = #{findPower}, </if>
			<if test="userLocal != null">`user_local` = #{userLocal}, </if>
			<if test="fault != null">`fault` = #{fault}, </if>
			<if test="borrowModel != null">`borrow_model` = #{borrowModel}, </if>
			<if test="suggest != null">`suggest` = #{suggest}</if>
		</set>
		where id = #{id}
	</update>
	
	<delete id="delete">
		delete from user_questionnaire where id = #{value}
	</delete>
	
	<delete id="deleteBatch">
		delete from user_questionnaire where id in 
		<foreach item="id" collection="array" open="(" separator="," close=")">
			#{id}
		</foreach>
	</delete>

</mapper>